/*
 * FileTest.c
 *
 *  Created on: Nov 19, 2016
 *      Author: Kevin
 *
 *  This file is to run read and write times with a buffer
 */
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <fcntl.h>
#include <unistd.h>

void FileTest(int bufferSize){
	fprint("Reading from input file: 'lab5_input.txt'...");
	/* READING FROM FILE */
	int inFile, outFile, readCount, writeCount;
	char buffer[bufferSize];

	/* Open the input file and create the output file */
	inFile = open("P4_input_file", O_RDONLY);
	outFile = creat("P4_output_file", O_WRONLY);

	/* Copy loop */
	while (1) {
		readCount = read(inFile, buffer, bufferSize); /* read a block of data */
		if (readCount <= 0) break; /* if end of file or error, exit loop */
		writeCount = write(outFile, buffer, readCount); /* write data */
	}
	/* Close the files */
	close(inFile);
	close(outFile);
	if (readCount == 0) return;
	else {
		printf("Error in last thread");
		return;
	};
}
